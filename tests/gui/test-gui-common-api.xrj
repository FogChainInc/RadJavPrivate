RadJav.initialize (RadJav.getStandardLibrary (),
					RadJav.getGUILibrary (),
					RadJav.getMUILibrary ()).then (function () {
	RadJav.runApplication (function ()
	{
		// Common GUI API test cases
		
		// generic create API test
		let createApiTest = function(controlName)
		{
			let check = this;
			let message = controlName+".create() API return Promise";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window", controlName+" create API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI[controlName](controlName, "test", window);
					let ret = control.create();
					if (ret instanceof Promise)
					{
						check.assert(true, message);
					}
					else
					{
						check.assert(false, message);
					}
					
					resolve();
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
		}
		
		// Window create API test
		RadJav.addTest("test_common_create_001", function(check) {
			let message = "Window.create() API return Promise";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window","Window create API test");
				let ret = window.create();
				if (ret instanceof Promise)
				{
					check.assert(true, message);
				}
				else
				{
					check.assert(false, message);
				}
				
				resolve();
			});
			
			return promise;
			
		});
		
		// Button create API test
		RadJav.addTest("test_common_create_002", function(check) {
			return createApiTest.call(check, "Button");
		});
		
		// Checkbox create API test
		RadJav.addTest("test_common_create_003", function(check) {
			return createApiTest.call(check, "Checkbox");
		});
		
		// Combobox create API test
		RadJav.addTest("test_common_create_004", function(check) {
			return createApiTest.call(check, "Combobox");
		});
		
		// Container create API test
		RadJav.addTest("test_common_create_005", function(check) {
			return createApiTest.call(check, "Container");
		});
		
		// Image create API test
		RadJav.addTest("test_common_create_006", function(check) {
			return createApiTest.call(check, "Image");
		});
		
		// Label create API test
		RadJav.addTest("test_common_create_007", function(check) {
			return createApiTest.call(check, "Label");
		});
		
		// List create API test
		RadJav.addTest("test_common_create_008", function(check) {
			return createApiTest.call(check, "List");
		});
		
		// MebuBar create API test
		RadJav.addTest("test_common_create_009", function(check) {
			return createApiTest.call(check, "MenuBar");
		});
		
		// MenuItem create API test
		RadJav.addTest("test_common_create_010", function(check) {
			let message = "MenuItem.create() API return Promise";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window","MenuItem create API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI.MenuBar("Menubar", "", window);
					control.create().then(function(cnt) {
						control = cnt;
						
						var menuItem = new RadJav.GUI.MenuItem("Menu file", "File", control);
						let ret = menuItem.create();
						if (ret instanceof Promise)
						{
							check.assert(true, message);
						}
						else
						{
							check.assert(false, message);
						}
						
						resolve();
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		});
		
		// Radio create API test
		RadJav.addTest("test_common_create_011", function(check) {
			return createApiTest.call(check, "Radio");
		});
		
		// Textarea create API test
		RadJav.addTest("test_common_create_012", function(check) {
			return createApiTest.call(check, "Textarea");
		});
		
		// Textbox create API test
		RadJav.addTest("test_common_create_013", function(check) {
			return createApiTest.call(check, "Textbox");
		});
		
		// WebView create API test
		RadJav.addTest("test_common_create_014", function(check) {
			return createApiTest.call(check, "WebView");
		});
		
		// generic setFont, getFont API test
		let setGetFontApiTest = function(controlName) {
			let check = this;
			let message = controlName + ".set/getFont() have the same data";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window", controlName+" set/getFont API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI[controlName](controlName, "test", window);
					control.create().then( function(ctl) {
						control = ctl;
						
						let font = new RadJav.Font({fontFamily: "Arial",
														size: 12,
														color: RadJav.Color.Black,
														underline: true,
														bold: true,
														italic: true});
						control.setFont(font);
						let font2 = control.getFont();
						
						check.equal(font, font2, message);
						resolve();
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
		}
		
		// Window set/getFont API test
		RadJav.addTest("test_common_setgetfont_001", function(check) {
			let message = "Window.set/getFont() have the same data";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window","Window set/getFont API test");
				window.create().then(function(win) {
					window = win;
					
					let font = new RadJav.Font({fontFamily: "Arial",
													size: 10,
													color: RadJav.Color.Black,
													underline: true,
													bold: true,
													italic: true});
					window.setFont(font);
					let font2 = window.getFont();
					
					check.equal(font, font2, message);
					resolve();
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		});
		
		// Button set/getFont API test
		RadJav.addTest("test_common_setgetfont_002", function(check) {
			return setGetFontApiTest.call(check, "Button");
		});
		
		// Checkbox set/getFont API test
		RadJav.addTest("test_common_setgetfont_003", function(check) {
			return setGetFontApiTest.call(check, "Checkbox");
		});
		
		// Combobox set/getFont API test
		RadJav.addTest("test_common_setgetfont_004", function(check) {
			return setGetFontApiTest.call(check, "Combobox");
		});
		
		// Container set/getFont API test
		RadJav.addTest("test_common_setgetfont_005", function(check) {
			return setGetFontApiTest.call(check, "Container");
		});
		
		// Image set/getFont API test
		RadJav.addTest("test_common_setgetfont_006", function(check) {
			return setGetFontApiTest.call(check, "Image");
		});
		
		// Label set/getFont API test
		RadJav.addTest("test_common_setgetfont_007", function(check) {
			return setGetFontApiTest.call(check, "Label");
		});
		
		// List set/getFont API test
		RadJav.addTest("test_common_setgetfont_008", function(check) {
			return setGetFontApiTest.call(check, "List");
		});
		
		// MebuBar set/getFont API test
		RadJav.addTest("test_common_setgetfont_009", function(check) {
			return setGetFontApiTest.call(check, "MenuBar");
		});
		
		// MenuItem set/getFont API test
		RadJav.addTest("test_common_setgetfont_010", function(check) {
			let message = "MenuItem.set/getFont() have the same data";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window","MenuItem set/getFont API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI.MenuBar("Menubar", "", window);
					control.create().then(function(cnt) {
						control = cnt;
						
						var menuItem = new RadJav.GUI.MenuItem("Menu file", "File", control);
						menuItem.create().then( function(ctl) {
							let font = new RadJav.Font({fontFamily: "Arial",
															size: 12,
															color: RadJav.Color.Black,
															underline: true,
															bold: true,
															italic: true});
							control.setFont(font);
							let font2 = control.getFont();
							
							check.equal(font, font2, message);
							resolve();
						});
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		});
		
		// Radio set/getFont API test
		RadJav.addTest("test_common_setgetfont_011", function(check) {
			return setGetFontApiTest.call(check, "Radio");
		});
		
		// Textarea set/getFont API test
		RadJav.addTest("test_common_setgetfont_012", function(check) {
			return setGetFontApiTest.call(check, "Textarea");
		});
		
		// Textbox set/getFont API test
		RadJav.addTest("test_common_setgetfont_013", function(check) {
			return setGetFontApiTest.call(check, "Textbox");
		});
		
		// WebView set/getFont API test
		RadJav.addTest("test_common_setgetfont_014", function(check) {
			return setGetFontApiTest.call(check, "WebView");
		});
		
		// generic setPosition, getPosition API test
		let setGetPositionApiTest = function(controlName) {
			let check = this;
			let message = controlName + ".set/getPosition() have the same data";
			let expectedPosition = new RadJav.Vector2(100, 100);
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window", controlName+" set/getPosition API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI[controlName](controlName, "test", window);
					control.create().then( function(ctl) {
						control = ctl;
						
						control.setPosition(expectedPosition.x, expectedPosition.y);
						let pos = control.getPosition();
						
						check.equal(JSON.stringify(pos), JSON.stringify(expectedPosition), message);
						resolve();
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
		}
		
		// Window set/getPosition API test
		RadJav.addTest("test_common_setgetposition_001", function(check) {
			let message = "Window.set/getPosition() have the same data";
			let expectedPosition = new RadJav.Vector2(100, 100);
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window","Window set/getPosition API test");
				window.create().then(function(win) {
					window = win;

					window.setPosition(expectedPosition.x, expectedPosition.y);
					let pos = window.getPosition();
					
					check.equal(JSON.stringify(pos), JSON.stringify(expectedPosition), message);
					resolve();
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		});
		
		// Button set/getPosition API test
		RadJav.addTest("test_common_setgetposition_002", function(check) {
			return setGetPositionApiTest.call(check, "Button");
		});
		
		// Checkbox set/getFont API test
		RadJav.addTest("test_common_setgetposition_003", function(check) {
			return setGetPositionApiTest.call(check, "Checkbox");
		});
		
		// Combobox set/getFont API test
		RadJav.addTest("test_common_setgetposition_004", function(check) {
			return setGetPositionApiTest.call(check, "Combobox");
		});
		
		// Container set/getFont API test
		RadJav.addTest("test_common_setgetposition_005", function(check) {
			return setGetPositionApiTest.call(check, "Container");
		});
		
		// Image set/getFont API test
		RadJav.addTest("test_common_setgetposition_006", function(check) {
			return setGetPositionApiTest.call(check, "Image");
		});
		
		// Label set/getFont API test
		RadJav.addTest("test_common_setgetposition_007", function(check) {
			return setGetPositionApiTest.call(check, "Label");
		});
		
		// List set/getFont API test
		RadJav.addTest("test_common_setgetposition_008", function(check) {
			return setGetPositionApiTest.call(check, "List");
		});
		
		// MebuBar set/getFont API test
		RadJav.addTest("test_common_setgetposition_009", function(check) {
			let message = "MenuBar.getPosition() return (0,0)";
			let expectedPosition = new RadJav.Vector2(0, 0);
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window","MenuBar set/getPosition API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI.MenuBar("Menubar", "", window);
					control.create().then(function(cnt) {
						control = cnt;

						control.setPosition(100, 100);
						let pos = control.getPosition();
						
						check.equal(JSON.stringify(pos), JSON.stringify(expectedPosition), message);
						resolve();
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		});
		
		// MenuItem set/getFont API test
		RadJav.addTest("test_common_setgetposition_010", function(check) {
			let message = "MenuItem.getPosition() return (0,0)";
			let expectedPosition = new RadJav.Vector2(0, 0);
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window","MenuItem set/getPosition API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI.MenuBar("Menubar", "", window);
					control.create().then(function(cnt) {
						control = cnt;
						
						var menuItem = new RadJav.GUI.MenuItem("Menu file", "File", control);
						menuItem.create().then( function(ctl) {
							menuItem.setPosition(100, 100);
							let pos = menuItem.getPosition();
							
							check.equal(JSON.stringify(pos), JSON.stringify(expectedPosition), message);
							resolve();
						});
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		});
		
		// Radio set/getFont API test
		RadJav.addTest("test_common_setgetposition_011", function(check) {
			return setGetPositionApiTest.call(check, "Radio");
		});
		
		// Textarea set/getFont API test
		RadJav.addTest("test_common_setgetposition_012", function(check) {
			return setGetPositionApiTest.call(check, "Textarea");
		});
		
		// Textbox set/getFont API test
		RadJav.addTest("test_common_setgetposition_013", function(check) {
			return setGetPositionApiTest.call(check, "Textbox");
		});
		
		// WebView set/getFont API test
		RadJav.addTest("test_common_setgetposition_014", function(check) {
			return setGetPositionApiTest.call(check, "WebView");
		});
		
		// Execute test cases
		RadJav.runTests().then( function() {
			RadJav.exit();
		});
	});
});
