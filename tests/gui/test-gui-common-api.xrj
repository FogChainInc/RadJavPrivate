RadJav.initialize (RadJav.getStandardLibrary (),
					RadJav.getGUILibrary (),
					RadJav.getMUILibrary ()).then (function () {
	RadJav.runApplication (function ()
	{
		let tests = new RadJav.Testing.FunctionalTests("");
		
		// Common GUI API test cases
		
		// generic create API test
		let createApiTest = function(controlName)
		{
			let check = this;
			let message = controlName+".create() API return Promise";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window", controlName+" create API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI[controlName](controlName, "test", window);
					let ret = control.create();
					if (ret instanceof Promise)
					{
						check.assert(true, message);
					}
					else
					{
						check.assert(false, message);
					}
					
					resolve();
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
		}
		
		// Window create API test
		let test = new RadJav.Testing.Test("test_common_create_001");
		let ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			let message = "Window.create() API return Promise";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window","Window create API test");
				let ret = window.create();
				if (ret instanceof Promise)
				{
					check.assert(true, message);
				}
				else
				{
					check.assert(false, message);
				}
				
				resolve();
			});
			
			return promise;
			
		}, ta);
		
		tests.addTest(test);
		
		// Button create API test
		test = new RadJav.Testing.Test("test_common_create_002");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Button");
		}, ta);
		
		tests.addTest(test);
		
		// Checkbox create API test
		test = new RadJav.Testing.Test("test_common_create_003");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Checkbox");
		}, ta);
		
		tests.addTest(test);
		
		// Combobox create API test
		test = new RadJav.Testing.Test("test_common_create_004");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Combobox");
		}, ta);
		
		tests.addTest(test);
		
		// Container create API test
		test = new RadJav.Testing.Test("test_common_create_005");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Container");
		}, ta);
		
		tests.addTest(test);
		
		// Image create API test
		test = new RadJav.Testing.Test("test_common_create_006");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Image");
		}, ta);
		
		tests.addTest(test);
		
		// Label create API test
		test = new RadJav.Testing.Test("test_common_create_007");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Label");
		}, ta);
		
		tests.addTest(test);
		
		// List create API test
		test = new RadJav.Testing.Test("test_common_create_008");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "List");
		}, ta);
		
		tests.addTest(test);
		
		// MebuBar create API test
		test = new RadJav.Testing.Test("test_common_create_009");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "MenuBar");
		}, ta);
		
		tests.addTest(test);
		
		// MenuItem create API test
		test = new RadJav.Testing.Test("test_common_create_010");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			let message = "MenuItem.create() API return Promise";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window","MenuItem create API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI.MenuBar("Menubar", "", window);
					control.create().then(function(cnt) {
						control = cnt;
						
						var menuItem = new RadJav.GUI.MenuItem("Menu file", "File", control);
						let ret = menuItem.create();
						if (ret instanceof Promise)
						{
							check.assert(true, message);
						}
						else
						{
							check.assert(false, message);
						}
						
						resolve();
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		}, ta);
		
		tests.addTest(test);
		
		// Radio create API test
		test = new RadJav.Testing.Test("test_common_create_011");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Radio");
		}, ta);
		
		tests.addTest(test);
		
		// Textarea create API test
		test = new RadJav.Testing.Test("test_common_create_012");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Textarea");
		}, ta);
		
		tests.addTest(test);
		
		// Textbox create API test
		test = new RadJav.Testing.Test("test_common_create_013");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "Textbox");
		}, ta);
		
		tests.addTest(test);
		
		// WebView create API test
		test = new RadJav.Testing.Test("test_common_create_014");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return createApiTest.call(check, "WebView");
		}, ta);
		
		tests.addTest(test);
		
		// generic setFont, getFont API test
		let setGetFontApiTest = function(controlName) {
			let check = this;
			let message = controlName + ".set/getFont() have the same data";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window", controlName+" set/getFont API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI[controlName](controlName, "test", window);
					control.create().then( function(ctl) {
						control = ctl;
						
						let font = new RadJav.Font({fontFamily: "Arial",
														size: 12,
														color: RadJav.Color.Black,
														underline: true,
														bold: true,
														italic: true});
						control.setFont(font);
						let font2 = control.getFont();
						
						check.equal(font, font2, message);
						resolve();
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
		}
		
		// Window set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_001");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			let message = "Window.set/getFont() have the same data";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("Window","Window create API test");
				window.create().then(function(win) {
					window = win;
					
					let font = new RadJav.Font({fontFamily: "Arial",
													size: 10,
													color: RadJav.Color.Black,
													underline: true,
													bold: true,
													italic: true});
					window.setFont(font);
					let font2 = window.getFont();
					
					check.equal(font, font2, message);
					resolve();
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		}, ta);
		
		tests.addTest(test);
		
		// Button set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_002");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Button");
		}, ta);
		
		tests.addTest(test);
		
		// Checkbox set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_003");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Checkbox");
		}, ta);
		
		tests.addTest(test);
		
		// Combobox set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_004");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Combobox");
		}, ta);
		
		tests.addTest(test);
		
		// Container set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_005");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Container");
		}, ta);
		
		tests.addTest(test);
		
		// Image set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_006");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Image");
		}, ta);
		
		tests.addTest(test);
		
		// Label set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_007");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Label");
		}, ta);
		
		tests.addTest(test);
		
		// List set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_008");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "List");
		}, ta);
		
		tests.addTest(test);
		
		// MebuBar set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_009");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "MenuBar");
		}, ta);
		
		tests.addTest(test);
		
		// MenuItem set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_010");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			let message = "MenuItem.set/getFont() have the same data";
			
			let promise = new Promise(function(resolve, reject) {
				var window = new RadJav.GUI.Window("window","MenuItem create API test");
				window.create().then(function(win) {
					window = win;
					
					var control = new RadJav.GUI.MenuBar("Menubar", "", window);
					control.create().then(function(cnt) {
						control = cnt;
						
						var menuItem = new RadJav.GUI.MenuItem("Menu file", "File", control);
						menuItem.create().then( function(ctl) {
							let font = new RadJav.Font({fontFamily: "Arial",
															size: 12,
															color: RadJav.Color.Black,
															underline: true,
															bold: true,
															italic: true});
							control.setFont(font);
							let font2 = control.getFont();
							
							check.equal(font, font2, message);
							resolve();
						});
					});
				});
				
				setTimeout(function ()
				{
					check.assert(false, message);
					resolve();
				}, 5000);
			});
			
			return promise;
			
		}, ta);
		
		tests.addTest(test);
		
		// Radio set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_011");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Radio");
		}, ta);
		
		tests.addTest(test);
		
		// Textarea set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_012");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Textarea");
		}, ta);
		
		tests.addTest(test);
		
		// Textbox set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_013");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "Textbox");
		}, ta);
		
		tests.addTest(test);
		
		// WebView set/getFont API test
		test = new RadJav.Testing.Test("test_common_setgetfont_014");
		ta = new RadJav.Testing.TestLibrary(test);
		
		test.func = RadJav.keepContext(function () {
			let check = this;
			
			return setGetFontApiTest.call(check, "WebView");
		}, ta);
		
		tests.addTest(test);
		
		// Execute test cases
		tests.execute().then( function(tests) {
			RadJav.exit();
		});
	});
});
