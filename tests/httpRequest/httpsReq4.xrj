var win = new RadJav.GUI.Window ("win", "Window Example");

// Stupid hack for now. Delete in the future. Should throw errors in HTML5.
win.create ().then (function (win2)
	{
	});

RadJav.Console.println("------------ httpReq3.xrj test --------------");

var capabilities = RadJav.Crypto.Cipher.getCapabilities();

if ( (typeof capabilities.cryptoLibs === "object") && (capabilities.cryptoLibs !== null) )
{
    RadJav.Console.println("Has Crypto Implementation: ");
    for (var cryptoLib in capabilities.cryptoLibs)
    {
	RadJav.Console.println(cryptoLib);
    }
}


RadJav.Console.println("Loading default certificates");
try
{
    var req = new RadJav.Net.HttpRequest({useDefaultCertificates: "true", verifyMode: "VerifyPeer"});

    req.connect("https://ev-root.chain-demos.digicert.com/info/index.html").then(function (target) {
    

	RadJav.Console.println("Loading default certificates - success");

	RadJav.Console.println(req.fetchSync(target));
    });

}
catch (error)
{
    RadJav.Console.println(error);
}


RadJav.Console.println("Loading cert from a file");
try
{
    var req = new RadJav.Net.HttpRequest({trustStore: "cert/DigiCert.crt", verifyMode: "VerifyPeer"});

    req.connect("https://ev-root.chain-demos.digicert.com/info/index.html").then(function (target) {
    
	RadJav.Console.println("Loading cert from a file - success!");

	RadJav.Console.println(req.fetchSync(target));
    });

}
catch (error)
{
    RadJav.Console.println(error);
}


RadJav.Console.println("No certs, no verify mode");

try
{
    var req = new RadJav.Net.HttpRequest();

    req.connect("https://ev-root.chain-demos.digicert.com/info/index.html").then(function (target) {
    
	RadJav.Console.println("No certs, no verify mode - success!");

	RadJav.Console.println(req.fetchSync(target));
    });

}
catch (error)
{
    RadJav.Console.println(error);
}



RadJav.Console.println("No certs, forcing verify mode");
try
{
    var req = new RadJav.Net.HttpRequest({verifyMode: "VerifyPeer"});

    req.connect("https://ev-root.chain-demos.digicert.com/info/index.html").then(function (target) {
    
	RadJav.Console.println("No certs, forcing verify mode - success!");

	RadJav.Console.println(req.fetchSync(target));
    });

}
catch (error)
{
    RadJav.Console.println(error);
}


